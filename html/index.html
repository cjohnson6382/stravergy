<html ng-app='stravaApp'>
    <head>
        <!-- the stupid Google URL works, but my local stuff doesn't -->
        <script type='text/javascript' src='./includes/ui-bootstrap-tpls-1.3.2.min.js'></script>
        <script type='text/javascript' src='./includes/angular.min.js'></script>
        <script type='text/javascript' src='./includes/angular-animate.js'></script>
        <script type='text/javascript' src='./includes/util.js'></script>
        <script type='text/javascript' src='./includes/stravegy.js'></script>
        <script type='text/javascript' src='./includes/quintileCtrl.js'></script>
        <script type='text/javascript' src='./includes/leaderboardCtrl.js'></script>
        <script type='text/javascript' src='./includes/activityCtrl.js'></script>
        <script type='text/javascript' src='./includes/segmentCtrl.js'></script>
        <script type='text/javascript' src='./includes/dataAggregationCtrl.js'></script>
        <script type='text/javascript' src='./includes/dataService.js'></script>
        <script type='text/javascript' src='./includes/sessionService.js'></script>
        <script type='text/javascript' src='./includes/authCtrl.js'></script>
        <script type='text/javascript' src='./includes/authPageInstanceCtrl.js'></script>

        <link rel='stylesheet' type='text/css' href='./includes/bootstrap.min.css'></link>
    </head>

    <body>
        <h1>Stravegy</h1>
        <p><b>
            See how your heart rate affects your time on different segments! 
            Heart rate is one indication of how hard you are working on a segment. 
            Find a segment that you worked really hard on, and compare yourself to
            different quntiles of Strava users who also wore heart rate monitors. 
            If you worked hard on one segment and fell in the top 20% of the leaderboard, 
            but you barely tried on another and still fell into the top 20%, then you can 
            probably do better on that segment.
        </b></p>
        <div>
            <!-- angular is going to check whether you are authorized
                and if not it will send you to an auth page -->
            <div id='auth' ng-show='authvisible()' ng-controller='AuthCtrl'>
                <p>First, click the following button to authenticate
                so that we can access your information:</p>
                <button ng-click='authenticate()'>Authenticate</button> 
            </div>
            
            <br />

            <div ng-controller='DataAggregationCtrl'>
                <span ng-show='false'>{{ average_hr }}</span>
                <span ng-show='false'>{{ leaderboard_hr }}</span>
                <span ng-show='false'>{{ efforts_hr }}</span>
            </div>
            <div id='quintiles' ng-controller='QuintileCtrl'>
                <div>Choose a segment of the leaderboard to compare yourself with:</div>
                <div id='quintile_selected' ng-show='false'>{{ quintile.value }}</div>
                <div id='quintile_buttons' ng-show='true'>
                    <input type='radio' name='quintiles' ng-model='quintile.value' value=1>0-20%</input>
                    <input type='radio' name='quintiles' ng-model='quintile.value' value=2>20-40%</input>
                    <input type='radio' name='quintiles' ng-model='quintile.value' value=3>40-60%</input>
                    <input type='radio' name='quintiles' ng-model='quintile.value' value=4>60-80%</input>
                    <input type='radio' name='quintiles' ng-model='quintile.value 'value=5>80-100%</input>
                </div>
            </div> 

            <div id='activities' ng-show='activitiesVisible()' ng-controller='ActivityCtrl'>
                <button ng-click='go()' >Get your activities</button>
                <div id='activity_list'>
                    <ul>
                        <li ng-repeat='activity in activities'>
                            <span>{{ activity.name }}</span>
                            <span>{{ "On: " + activity.date }}</span>
                            <br />
                            <span>{{ metersToMiles(activity.distance) + " Miles" }}</span>
                            <span>{{ metersToFeet(activity.total_elevation_gain) + "Ft Elevation}}</span>
                        </li>
                    </ul>
                </div>
            </div>

            <div id='segments' ng-controller='SegmentCtrl'>
                <div id='segment_list'>
                    <ul>
                        <li ng-repeat='segment in segments'>
                            <span>{{ segment.name }}</span>
                            <span>{{ metersToMiles(segment.disance) + " Miles" }}</span>
                            <span>{{ segment.average_grade + " Avg. Grade" }}</span>
                            <span>{{ metersToFeet(segment.total_elevation_gain) + " Total Elevation"}}</span>
                        </li>
                    </ul>
                </div>
            </div>

            <div id='leaderboard' ng-controller='LeaderboardCtrl'>
<!--
                <div id='leaderboard_list'>
                    <ul>
                        <li ng-repeat='entry in leaderobard'>
                            <span>{{ entry.athlete_name }}</span>
                            <span>{{ secondsToFormattedTime(entry.elapsed_time) }}</span>
                            <span>{{ entry.average_hr }}</span>
                            <span>{{ entry.average_watts }}</span>
                        </li>
                    </ul>
                </div>
-->
            </div>
        </div>
    </body>
</html>
